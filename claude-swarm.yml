version: 1
swarm:
  name: "Ruby-News Rails Development Team"
  main: architect

  mcps:
    - name: rails
      type: stdio
      command: rails-mcp-server
      args: []
      env:
        RAILS_ENV: development

  instances:
    architect:
      description: "Rails architect coordinating full-stack development for Ruby-News"
      directory: .
      model: sonnet
      connections: [models, controllers, views, stimulus, services, jobs, tests]
      prompt_file: .claude/agents/rails-architect.md
      vibe: true

    models:
      description: "ActiveRecord models, migrations, and database optimization specialist"
      directory: ./app/models
      model: sonnet
      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/models-specialist.md

    controllers:
      description: "Rails controllers, routing, and request handling specialist"
      directory: ./app/controllers
      model: sonnet

      connections: [services]

      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/rails-controller-specialist.md

    views:
      description: "Rails views, layouts, partials, and asset pipeline specialist"
      directory: ./app/views
      model: sonnet

      connections: [stimulus]

      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/rails-views-specialist.md

    stimulus:
      description: "Stimulus.js controllers and Turbo integration specialist"
      directory: ./app/javascript
      model: sonnet
      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/stimulus-turbo-specialist.md

    services:
      description: "Service objects, business logic, and design patterns specialist"
      directory: ./app/services
      model: sonnet
      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/service-objects-specialist.md

    jobs:
      description: "Background jobs, ActiveJob, and async processing specialist"
      directory: ./app/jobs
      model: sonnet
      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/background-jobs-specialist.md

    tests:
      description: "Minitest testing, factories, and test coverage specialist"
      directory: ./test
      model: sonnet
      allowed_tools: [Read, Edit, Write, Bash, Grep, Glob, LS]
      prompt_file: .claude/agents/minitest-specialist.md
