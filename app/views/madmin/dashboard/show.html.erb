<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6">관리자 대시보드</h1>

  <!-- Key Metrics -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">총 기사 수</h2>
      <p class="text-3xl font-bold"><%= @articles_count %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">총 사이트 수</h2>
      <p class="text-3xl font-bold"><%= @sites_count %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">총 사용자 수</h2>
      <p class="text-3xl font-bold"><%= @users_count %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">총 댓글 수</h2>
      <p class="text-3xl font-bold"><%= @comments_count %></p>
    </div>
  </div>

  <!-- Weekly Stats -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">이번 주 새 기사</h2>
      <p class="text-3xl font-bold"><%= @weekly_articles %></p>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-lg font-semibold text-gray-600">활성 RSS 사이트 (1주일)</h2>
      <p class="text-3xl font-bold"><%= @active_sites %></p>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Recent Articles -->
    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold mb-4">최신 기사</h2>
      <ul>
        <% @recent_articles.each do |article| %>
          <li class="border-b last:border-b-0 py-3">
            <p class="font-semibold"><%= link_to article.title, madmin_article_path(article), class: "hover:text-blue-600" %></p>
            <p class="text-sm text-gray-500"><%= article.site&.name %> - <%= time_ago_in_words(article.created_at) %> 전</p>
          </li>
        <% end %>
      </ul>
    </div>

    <!-- Popular Tags -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-bold mb-4">인기 태그</h2>
      <table class="w-full text-sm text-left text-gray-500">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3">태그</th>
            <th scope="col" class="px-6 py-3">카운트</th>
          </tr>
        </thead>
        <tbody>
          <% @popular_tags.each do |tag| %>
            <tr class="bg-white border-b">
              <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                <%= tag.name %>
              </th>
              <td class="px-6 py-4">
                <%= tag.taggings_count %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Recent Comments -->
  <div class="mt-8 bg-white p-6 rounded-lg shadow">
    <h2 class="text-xl font-bold mb-4">최신 댓글</h2>
    <ul>
      <% @recent_comments.each do |comment| %>
        <li class="border-b last:border-b-0 py-3">
          <p class="text-gray-800">"<%= truncate(comment.body, length: 100) %>"</p>
          <p class="text-sm text-gray-500 mt-1">
            <strong><%= comment.user.name %></strong> 님이 <strong><%= link_to comment.article.title, madmin_article_path(comment.article), class: "hover:text-blue-600" %></strong> 기사에 댓글을 남겼습니다.
            (<%= time_ago_in_words(comment.created_at) %> 전)
          </p>
        </li>
      <% end %>
    </ul>
  </div>
</div>